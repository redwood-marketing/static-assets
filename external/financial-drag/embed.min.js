(function(u){"use strict";const i=new Map,w=function(){const s=document.getElementsByTagName("script");for(let e=s.length-1;e>=0;e--){const t=s[e].src;if(t)try{const n=new URL(t),r=n.pathname;if(r.endsWith("/embed.min.js")||r.endsWith("/embed.js"))return n.origin+r.replace(/\/embed(\.min)?\.js$/,"")}catch{continue}}return""}();function y(s){const{element:e,type:t,version:n,options:r}=s;if(!e)return console.error("[FinancialDrag] No element provided"),null;const d=i.get(e);d&&(d.remove(),i.delete(e));const c=(r==null?void 0:r.baseUrl)||w,o=n?`v${n}`:"latest";let p=`${c}/${o}/index-embed.html`;const m=new URLSearchParams;m.set("type",t),m.set("embed","true"),r!=null&&r.sessionId&&m.set("session",r.sessionId),p+=`?${m.toString()}`;const a=document.createElement("iframe");return a.src=p,a.style.cssText=`
    width: 100%;
    min-height: 600px;
    border: none;
    display: block;
    overflow: hidden;
  `,a.setAttribute("allowfullscreen","true"),a.setAttribute("allow","clipboard-write"),i.set(e,a),e.innerHTML="",e.appendChild(a),a}function f(s,e,t){var r,d,c;const n=s.data;if(!(!n||typeof n.type!="string")&&n.type.startsWith("redwood:assessment:"))switch(n.type){case"redwood:assessment:ready":(r=e.onReady)==null||r.call(e);break;case"redwood:assessment:complete":(d=e.onComplete)==null||d.call(e,n.payload);break;case"redwood:assessment:resize":{const{height:o}=n.payload;o&&o>0&&(t.style.height=`${o}px`,(c=e.onResize)==null||c.call(e,o));break}}}function l(s){if(!s.element){console.error("[FinancialDrag] Element not found");return}const e=y(s);if(!e)return;const t=r=>{r.source===e.contentWindow&&f(r,s,e)};window.addEventListener("message",t);const n=new MutationObserver(()=>{document.contains(e)||(window.removeEventListener("message",t),n.disconnect(),s.element&&i.get(s.element)===e&&i.delete(s.element))});n.observe(document.body,{childList:!0,subtree:!0})}function b(s){for(const e of s)typeof e=="function"?e():l(e)}function h(){const s=window.FinancialDragAssessment,e={push(t){typeof t=="function"?t():document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>l(t)):l(t)},init(t){this.push(t)},destroy(t){const n=i.get(t);n&&(n.remove(),i.delete(t))},version:"1.0.0"};window.FinancialDragAssessment=e,Array.isArray(s)&&b(s)}typeof window<"u"&&h(),u.init=h,u.initAssessment=l,Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})(this.FinancialDragAssessment=this.FinancialDragAssessment||{});
//# sourceMappingURL=embed.min.js.map
