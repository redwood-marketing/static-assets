(function(l){"use strict";const r=new Map,u=(()=>{const t=document.getElementsByTagName("script");for(let s=t.length-1;s>=0;s-=1){const o=t[s].src;if(o)try{const e=new URL(o);if(e.pathname.endsWith("/embed.min.js")||e.pathname.endsWith("/embed.js"))return e.origin+e.pathname.replace(/\/embed(\.min)?\.js$/,"")}catch{continue}}return""})();function h(t){if(!t.element)return console.error("[RedwoodJournalAssessment] Missing container element"),null;const s=r.get(t.element);s&&(s.remove(),r.delete(t.element));const o=t.options?.baseUrl||u,e=t.version||"latest",n=e==="dev",m=e!=="latest"&&e!=="dev"?`v${e}`:e,a=new URL(n?"/":`${o}/${m}/index-embed.html`,n?window.location.origin:void 0);a.searchParams.set("embed","true"),a.searchParams.set("type",t.type),t.options?.reportBaseUrl&&a.searchParams.set("reportBaseUrl",t.options.reportBaseUrl);const i=document.createElement("iframe");return i.src=a.toString(),i.style.cssText=`
    width: 100%;
    min-height: 720px;
    border: none;
    display: block;
    overflow: hidden;
  `,i.setAttribute("allowfullscreen","true"),i.setAttribute("allow","clipboard-write"),t.element.innerHTML="",t.element.appendChild(i),r.set(t.element,i),i}function p(t,s,o){if(t.source!==o.contentWindow)return;const e=t.data;if(!(!e?.type||!e.type.startsWith("redwood:assessment:")))switch(e.type){case"redwood:assessment:ready":s.onReady?.();break;case"redwood:assessment:resize":{const n=e.payload;n?.height&&n.height>0&&(o.style.height=`${n.height}px`,s.onResize?.(n.height));break}case"redwood:assessment:complete":{const n=e.payload;s.onComplete?.(n),(s.options?.autoRedirect??!0)&&n?.redirectUrl&&(window.location.href=n.redirectUrl);break}}}function d(t){const s=h(t);if(!s)return;const o=n=>p(n,t,s);window.addEventListener("message",o);const e=new MutationObserver(()=>{document.contains(s)||(window.removeEventListener("message",o),e.disconnect(),t.element&&r.get(t.element)===s&&r.delete(t.element))});e.observe(document.body,{childList:!0,subtree:!0})}function w(t){t.forEach(s=>{typeof s=="function"?s():d(s)})}function c(){const s=window.RedwoodJournalAssessment,o={push(e){typeof e=="function"?e():document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>d(e)):d(e)},init(e){this.push(e)},destroy(e){const n=r.get(e);n&&(n.remove(),r.delete(e))},version:"1.0.0"};window.RedwoodJournalAssessment=o,Array.isArray(s)&&w(s)}typeof window<"u"&&c(),l.init=c,Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})(this.RedwoodJournalAssessment=this.RedwoodJournalAssessment||{});
//# sourceMappingURL=embed.min.js.map
